<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Quick Symbols Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #1e1e1e;
      color: #ccc;
    }
    .test-section {
      margin: 20px 0;
      padding: 20px;
      background: #2a2a2a;
      border-radius: 5px;
    }
    .quick-symbols {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }
    .quick-symbol-btn {
      padding: 6px 12px;
      background: #444;
      border: 1px solid #555;
      border-radius: 3px;
      color: #ccc;
      cursor: pointer;
      transition: all 0.2s;
    }
    .quick-symbol-btn:hover {
      background: #4CAF50;
      border-color: #4CAF50;
      color: white;
    }
    input {
      padding: 8px;
      background: #333;
      border: 1px solid #555;
      color: #ccc;
      border-radius: 3px;
      width: 200px;
    }
    button {
      padding: 8px 16px;
      background: #4CAF50;
      border: none;
      color: white;
      border-radius: 3px;
      cursor: pointer;
      margin: 5px;
    }
    button:hover {
      background: #45a049;
    }
    .output {
      margin-top: 10px;
      padding: 10px;
      background: #333;
      border-radius: 3px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h1>Quick Symbols Component Test</h1>
  
  <div class="test-section">
    <h2>Test 1: Basic Quick Symbols</h2>
    <p>Click a symbol button to populate the input:</p>
    <input type="text" id="test1Input" placeholder="Symbol">
    <div id="test1Container"></div>
    <div class="output">Selected: <span id="test1Output">-</span></div>
  </div>
  
  <div class="test-section">
    <h2>Test 2: Configuration Management</h2>
    <button onclick="showCurrentSymbols()">Show Current Symbols</button>
    <button onclick="addTestSymbol()">Add XAUUSD</button>
    <button onclick="removeTestSymbol()">Remove XAUUSD</button>
    <button onclick="resetSymbols()">Reset to Defaults</button>
    <div class="output" id="configOutput">-</div>
  </div>
  
  <div class="test-section">
    <h2>Test 3: Dynamic Update</h2>
    <p>Add a symbol in Test 2, then click refresh to see it here:</p>
    <input type="text" id="test3Input" placeholder="Symbol">
    <div id="test3Container"></div>
    <button onclick="refreshTest3()">Refresh Quick Symbols</button>
    <div class="output">Selected: <span id="test3Output">-</span></div>
  </div>

  <script src="config.js"></script>
  <script src="quick-symbols.js"></script>
  <script>
    // Test 1: Basic usage
    const test1Input = document.getElementById('test1Input');
    const test1Output = document.getElementById('test1Output');
    
    QuickSymbols.create(
      document.getElementById('test1Container'),
      (symbol) => {
        test1Input.value = symbol;
        test1Output.textContent = symbol;
      }
    );
    
    // Test 2: Configuration
    function showCurrentSymbols() {
      const symbols = AppConfig.getQuickSymbols();
      document.getElementById('configOutput').textContent = 
        'Current symbols: ' + symbols.join(', ');
    }
    
    function addTestSymbol() {
      AppConfig.addQuickSymbol('XAUUSD');
      showCurrentSymbols();
      alert('Added XAUUSD. Click "Refresh Quick Symbols" in Test 3 to see it.');
    }
    
    function removeTestSymbol() {
      AppConfig.removeQuickSymbol('XAUUSD');
      showCurrentSymbols();
      alert('Removed XAUUSD. Click "Refresh Quick Symbols" in Test 3 to update.');
    }
    
    function resetSymbols() {
      AppConfig.quickSymbols = ['EURUSD', 'GBPUSD', 'USDJPY', 'AUDUSD', 'USDCAD'];
      AppConfig.saveToLocalStorage();
      showCurrentSymbols();
      alert('Reset to defaults. Click "Refresh Quick Symbols" in Test 3 to update.');
    }
    
    // Test 3: Dynamic update
    const test3Input = document.getElementById('test3Input');
    const test3Output = document.getElementById('test3Output');
    const test3Container = document.getElementById('test3Container');
    
    function createTest3Symbols() {
      test3Container.innerHTML = '';
      QuickSymbols.create(test3Container, (symbol) => {
        test3Input.value = symbol;
        test3Output.textContent = symbol;
      });
    }
    
    function refreshTest3() {
      createTest3Symbols();
      alert('Quick symbols refreshed!');
    }
    
    // Initialize
    createTest3Symbols();
    showCurrentSymbols();
  </script>
</body>
</html>
