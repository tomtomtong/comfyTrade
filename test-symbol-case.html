<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Symbol Case Test</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <div class="toolbar">
      <h1>Symbol Case Test</h1>
      <button id="settingsBtn" class="btn btn-secondary">⚙ Settings</button>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content settings-modal">
        <h2>Settings</h2>
        
        <!-- Settings Tabs -->
        <div class="settings-tabs">
          <button class="settings-tab-btn active" data-tab="quickSymbols">Quick Symbols</button>
        </div>
        
        <!-- Quick Symbols Tab -->
        <div id="quickSymbolsTab" class="settings-tab active">
          <div class="form-group">
            <label>Quick Symbol Buttons:</label>
            <p style="font-size: 12px; color: #888; margin: 5px 0;">Test case sensitivity - enter symbols like "btcusd" or "XauUsd"</p>
            
            <div id="quickSymbolsList" class="quick-symbols-list">
              <!-- Will be populated by JavaScript -->
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 10px;">
              <input type="text" id="newSymbolInput" placeholder="Try: btcusd, XauUsd, etc." style="flex: 1;" maxlength="10">
              <button id="addSymbolBtn" class="btn btn-primary">Add</button>
            </div>
            
            <div style="margin-top: 15px; padding: 10px; background: #2a2a2a; border-radius: 4px;">
              <h4>Test Results:</h4>
              <div id="testResults"></div>
            </div>
          </div>
        </div>
        
        <div class="modal-buttons">
          <button id="closeSettingsBtn" class="btn btn-secondary">Close</button>
          <button id="clearTestBtn" class="btn btn-warning">Clear Test</button>
        </div>
      </div>
    </div>
  </div>

  <script src="config.js"></script>
  <script>
    // Simple test implementation
    let testSymbols = [];

    document.getElementById('settingsBtn').onclick = () => {
      document.getElementById('settingsModal').classList.add('show');
      renderTestSymbols();
    };

    document.getElementById('closeSettingsBtn').onclick = () => {
      document.getElementById('settingsModal').classList.remove('show');
    };

    document.getElementById('clearTestBtn').onclick = () => {
      testSymbols = [];
      renderTestSymbols();
      updateTestResults();
    };

    document.getElementById('addSymbolBtn').onclick = addTestSymbol;

    document.getElementById('newSymbolInput').onkeypress = (e) => {
      if (e.key === 'Enter') {
        addTestSymbol();
      }
    };

    function addTestSymbol() {
      const input = document.getElementById('newSymbolInput');
      const symbol = input.value.trim(); // NO .toUpperCase() here!
      
      if (!symbol) {
        alert('Please enter a symbol');
        return;
      }
      
      if (testSymbols.includes(symbol)) {
        alert('Symbol already exists');
        return;
      }
      
      testSymbols.push(symbol);
      input.value = '';
      renderTestSymbols();
      updateTestResults();
    }

    function renderTestSymbols() {
      const container = document.getElementById('quickSymbolsList');
      container.innerHTML = '';
      
      if (testSymbols.length === 0) {
        container.innerHTML = '<p style="color: #888; margin: 10px;">No symbols added yet.</p>';
        return;
      }
      
      testSymbols.forEach(symbol => {
        const item = document.createElement('div');
        item.className = 'quick-symbol-item';
        
        const symbolText = document.createElement('span');
        symbolText.textContent = symbol;
        
        const removeBtn = document.createElement('button');
        removeBtn.className = 'remove-btn';
        removeBtn.textContent = '×';
        removeBtn.onclick = () => {
          testSymbols = testSymbols.filter(s => s !== symbol);
          renderTestSymbols();
          updateTestResults();
        };
        
        item.appendChild(symbolText);
        item.appendChild(removeBtn);
        container.appendChild(item);
      });
    }

    function updateTestResults() {
      const results = document.getElementById('testResults');
      if (testSymbols.length === 0) {
        results.innerHTML = '<p style="color: #888;">Add some symbols to test case preservation.</p>';
        return;
      }

      let html = '<p><strong>Added symbols (case preserved):</strong></p><ul>';
      testSymbols.forEach(symbol => {
        html += `<li><code>${symbol}</code></li>`;
      });
      html += '</ul>';
      
      results.innerHTML = html;
    }

    // Initialize
    renderTestSymbols();
    updateTestResults();
  </script>
</body>
</html>